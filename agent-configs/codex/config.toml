# Codex agent base configuration
model = "gpt-5.1-codex"
model_reasoning_effort = "high"
approval_policy = "always"

# Enable MCP client features
rmcp_client = true
web_search_request = true

# Sandbox and environment policy
[sandbox_workspace_write]
network_access = true
allow_all = true

[shell_environment_policy]
inherit = "all"
experimental_use_profile = true

[projects."/workspace"]
trust_level = "trusted"

# MCP Servers (shared across agents)
[mcp_servers.github]
url = "https://api.githubcopilot.com/mcp"
bearer_token_env_var = "GITHUB_TOKEN"

[mcp_servers.uno]
url = "https://mcp-docs.platform.uno/v1"

[mcp_servers.msftdocs]
url = "https://learn.microsoft.com/api/mcp"

[mcp_servers.playwright]
command = "npx"
args = ["@playwright/mcp@latest", "--isolated", "--headless"]

[mcp_servers.context7]
command = "npx"
args = ["-y","@upstash/context7-mcp","--api-key", "${CONTEXT7_API_KEY}"]

[mcp_servers.serena]
command = "uvx"
args = ["--from", "git+https://github.com/oraios/serena", "serena", "start-mcp-server", "--project", "/workspace", "--context", "codex", "--mode", "planning", "--mode", "editing", "--mode", "interactive"]

[mcp_servers.sequential-thinking]
command = "npx"
args = ["-y", "@modelcontextprotocol/server-sequential-thinking"]

[mcp_servers.fetch]
command = "npx"
args = ["mcp-server-fetch", "--ignore-robots-txt"]

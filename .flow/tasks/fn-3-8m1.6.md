# fn-3-8m1.6 Integration test and verify sync workflow

## Description
End-to-end verification of the refactored sync workflow (spec lines 507-536).

**Test cases**:

1. **Platform check**: Run on macOS (if available) - expect error
2. **Dry-run mode**: `sync-agent-plugins.sh --dry-run` - volume unchanged
3. **Full sync**: `sync-agent-plugins.sh` - configs synced
4. **Secret permissions**: Verify 600/700 on secret files/dirs
5. **Volume structure**: Inspect with `ls -laR`
6. **Container test**: Verify tools work (gh auth status, tmux loads, .bashrc.d sourced)

**Commands from spec**:
```bash
# Verify permissions
docker run --rm -v sandbox-agent-data:/data eeacms/rsync stat -c '%a %n' \
  /data/claude/credentials.json \
  /data/config/gh \
  /data/gemini/oauth_creds.json \
  /data/codex/auth.json

# Inspect structure
docker run --rm -v sandbox-agent-data:/data eeacms/rsync ls -laR /data
```
## Acceptance
- [ ] Platform guard rejects non-Linux
- [ ] Dry-run makes no volume changes
- [ ] Full sync copies all configs
- [ ] Secret permissions correct (600 files, 700 dirs)
- [ ] Plugins load correctly in container
- [ ] No orphan markers visible
- [ ] Shell sources .bashrc.d scripts
- [ ] tmux loads config
## Done summary
TBD

## Evidence
- Commits:
- Tests:
- PRs:

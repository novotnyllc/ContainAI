# fn-3-8m1.6 Integration test and verify sync workflow

## Description
End-to-end verification of the refactored sync workflow (spec lines 507-536).

**Test cases**:

1. **Platform check**: Run on macOS (if available) - expect error
2. **Dry-run mode**: `sync-agent-plugins.sh --dry-run` - volume unchanged
3. **Full sync**: `sync-agent-plugins.sh` - configs synced
4. **Secret permissions**: Verify 600/700 on secret files/dirs
5. **Volume structure**: Inspect with `ls -laR`
6. **Container test**: Verify tools work (gh auth status, tmux loads, .bashrc.d sourced)

**Commands from spec**:
```bash
# Verify permissions
docker run --rm -v sandbox-agent-data:/data eeacms/rsync stat -c '%a %n' \
  /data/claude/credentials.json \
  /data/config/gh \
  /data/gemini/oauth_creds.json \
  /data/gemini/google_accounts.json \
  /data/codex/auth.json \
  /data/local/share/opencode/auth.json

# Inspect structure
docker run --rm -v sandbox-agent-data:/data eeacms/rsync ls -laR /data
```
## Acceptance
- [ ] Platform guard rejects non-Linux
- [ ] Dry-run makes no volume changes
- [ ] Full sync copies all configs
- [ ] Secret permissions correct (600 files, 700 dirs)
- [ ] Plugins load correctly in container
- [ ] No orphan markers visible
- [ ] Shell sources .bashrc.d scripts
- [ ] tmux loads config
## Done summary
Ran integration test suite (agent-sandbox/test-sync-integration.sh) covering all 8 acceptance criteria plus gh CLI test (9 test sections total): platform guard, dry-run, full sync, secret permissions, plugins, orphan markers, shell sourcing, tmux config, and gh CLI availability.
## Evidence
- Commits: 6c1e5048e83685e64d8c9d04f2f217f96ce8e3dc, b263b0d55e852b45995a3534b647769040db5d34
- Tests: bash agent-sandbox/test-sync-integration.sh
- PRs:

# fn-3-8m1.3 Implement rsync-based sync_configs function

## Description
Replace current `copy_plugin_files()` with rsync-based `sync_configs()`.

**Key requirements** (spec lines 114-278):
- Use `eeacms/rsync` container image
- Pass map data via heredoc (avoid `printf %q`)
- Branch copy logic by flag type (files vs directories)
- True dry-run mode with `--dry-run --itemize-changes`
- Secret permissions: 600 files, 700 dirs
- Use `--chown=1000:1000` for agent user
- Handle `x` flag with `--exclude=.system/`
- Handle `m` flag with `--delete`

**Functions to implement**:
- `ensure()` - create target path, init JSON if flagged
- `copy()` - rsync source to target with appropriate flags
- `sync_configs()` - main function that runs docker container

**Keep existing transforms**: `transform_installed_plugins`, `transform_marketplaces`, `merge_enabled_plugins`, `remove_orphan_markers` - call after sync_configs().
## Acceptance
- [ ] Uses eeacms/rsync container
- [ ] SYNC_MAP entries processed correctly
- [ ] Files synced with `rsync $opts "$src" "$dst"`
- [ ] Dirs synced with `rsync $opts "$src/" "$dst/"`
- [ ] Dry-run uses rsync --dry-run (no mutations)
- [ ] Secret files get chmod 600
- [ ] Secret dirs get chmod 700
- [ ] Codex skills excludes .system/
- [ ] All 4 transform functions still called after sync
- [ ] Ownership set to 1000:1000
## Done summary
Implemented rsync-based sync_configs function using eeacms/rsync container with heredoc-based SYNC_MAP processing. Includes proper dry-run mode (--dry-run --itemize-changes), secret permissions (600 files, 700 dirs), .system/ exclusion for Codex skills (x flag), and --chown=1000:1000 for agent user ownership. All 4 post-sync transforms (transform_installed_plugins, transform_marketplaces, merge_enabled_plugins, remove_orphan_markers) are preserved and called after sync.
## Evidence
- Commits: a137bf6, 0879739, 8169ac4, 54fbf0c, 688422a
- Tests: bash -n agent-sandbox/sync-agent-plugins.sh, shellcheck agent-sandbox/sync-agent-plugins.sh
- PRs:

# fn-18-g96.5 Shell completion for container names

## Description

Implement shell completion for container names and the `cai completion` subcommand.

**New subcommand:** `cai completion <shell>`
- `cai completion bash` - Output bash completion script
- `cai completion zsh` - Output zsh completion script
- `cai completion fish` - Output fish completion script (optional stretch goal)

**Container name completion:**
- Complete `--container` parameter with ContainAI-managed containers
- Filter: `docker ps -a --filter "label=containai.managed=true" --format "{{.Names}}"`
- Works for: shell, run (shows existing for error feedback), import, export, stop

**Implementation:**

1. Add `_containai_completion_cmd()` function in `src/containai.sh`
2. Add `completion)` case to main dispatcher
3. Create completion scripts for bash and zsh

**Helper functions (using `_cai_` prefix consistently):**
- `_cai_list_containers()` - List ContainAI container names
- `_cai_list_templates()` - List available templates (from fn-18-g96.3)

**Bash completion script structure:**
```bash
_containai_complete() {
    local cur prev words cword
    _init_completion || return

    case "$prev" in
        --container)
            # List ContainAI-managed containers
            local containers
            containers=$(docker ps -a --filter "label=containai.managed=true" --format "{{.Names}}" 2>/dev/null)
            COMPREPLY=($(compgen -W "$containers" -- "$cur"))
            return
            ;;
        --template)
            # List available templates
            local templates_dir="${XDG_CONFIG_HOME:-$HOME/.config}/containai/templates"
            if [[ -d "$templates_dir" ]]; then
                local templates=()
                for dir in "$templates_dir"/*/; do
                    [[ -f "${dir}Dockerfile" ]] && templates+=("$(basename "$dir")")
                done
                COMPREPLY=($(compgen -W "${templates[*]}" -- "$cur"))
            fi
            return
            ;;
    esac

    # Subcommand completion
    if [[ $cword -eq 1 ]]; then
        COMPREPLY=($(compgen -W "run shell import export stop docker ssh links doctor setup validate update uninstall help version completion" -- "$cur"))
        return
    fi
}
complete -F _containai_complete cai containai
```

## Acceptance

- [ ] `cai completion bash` outputs working bash completion
- [ ] `cai completion zsh` outputs working zsh completion
- [ ] `cai completion --help` shows usage
- [ ] Container names completed for --container parameter
- [ ] Only ContainAI-managed containers shown (label filter)
- [ ] Completion installable via: `eval "$(cai completion bash)"`
- [ ] Unknown shell argument shows error
- [ ] Helper functions use `_cai_` prefix consistently

## Done summary
Superseded by fn-36-rb7
## Evidence
- Commits:
- Tests:
- PRs:

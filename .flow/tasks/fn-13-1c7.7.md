# fn-13-1c7.7 Write final recommendations document

## Description
Synthesize all research into a final recommendations document with clear decision guidance, implementation roadmap, and security assessment.

**Size:** M
**Files:** Output to `.flow/research/fn-13-1c7/RECOMMENDATIONS.md`

## Approach

1. Summarize findings from tasks 1-6
2. Rank integration options by:
   - Security (highest weight for ContainAI)
   - Implementation effort
   - Spec compliance / compatibility
   - Maintenance burden
3. Make a clear recommendation with rationale
4. **Complete the Conflict Matrix** from epic spec:
   - `workspaceFolder`/`workspaceMount` vs `/home/agent/workspace`
   - `remoteUser`/`containerUser`/`updateRemoteUserUID` vs `agent` user
   - `overrideCommand` vs systemd entrypoint
   - `forwardPorts`/`portsAttributes` vs SSH port model
   - Env merging precedence
   - Lifecycle hook timing relative to SSH
5. Outline implementation phases:
   - Phase 1: Minimal safe subset
   - Phase 2: Feature support
   - Phase 3: Full spec (if feasible)
6. Document known limitations and future work
7. List follow-up implementation epic tasks

## Key context

The recommendation should consider ContainAI's principles:
- Security first - sandbox integrity is non-negotiable
- Bash-based tooling - prefer shell over Node.js dependencies
- Sysbox foundation - solutions must work with Sysbox runtime
- User transparency - make clear what's blocked and why
- Primary path: devcontainer inside Sysbox system container (DinD)

## Acceptance
- [ ] All research findings synthesized
- [ ] Options ranked with clear criteria
- [ ] Single recommended approach with rationale
- [ ] **Conflict matrix completed** with resolution recommendations
- [ ] Phased implementation roadmap
- [ ] Known limitations documented
- [ ] Follow-up implementation tasks listed (sized S/M)

## Done summary
## Summary
Wrote comprehensive RECOMMENDATIONS.md synthesizing all research findings from tasks 1-6. The document recommends a Hybrid CLI-Parsing approach with Security Tiers that provides 100% spec compatibility via CLI fallback while maintaining security through configurable policy layers.

## Key Deliverables
1. **Research Synthesis**: All 6 prior task findings integrated with key insights
2. **Options Ranked**: 5 options scored using weighted criteria (Security 40%, Compliance 25%, Effort 15%, Maintenance 10%, Dependencies 10%)
3. **Clear Recommendation**: Hybrid CLI-Parsing with Security Tiers (score 8.1/10)
4. **Complete Conflict Matrix**: All 7 conflicts from epic spec addressed with resolution strategies
5. **Phased Implementation Roadmap**: 4 phases with acceptance criteria
6. **Known Limitations**: Documented what cannot/will not be supported with rationale
7. **25 Follow-up Tasks**: Sized S/M across Phase 1-3 plus documentation tasks

## Technical Approach
- CLI runs inside Sysbox for defense-in-depth (even unexpected behavior is sandboxed)
- Direct parsing fast path for 64%+ of simple configs (no Node.js overhead)
- Security tiers (strict/standard/permissive) let users choose risk tolerance
- Default: strict tier (appropriate for AI agent sandboxing use case)
## Evidence
- Commits:
- Tests:
- PRs:

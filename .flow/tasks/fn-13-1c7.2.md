# fn-13-1c7.2 Analyze real-world devcontainer usage patterns

## Description
Analyze how devcontainers are used in real-world projects to understand which properties are commonly used, which features are popular, and what percentage of existing devcontainers would work with a restricted parser.

**Size:** M
**Files:** Output to `.flow/research/fn-13-1c7/usage-analysis.md`

## Approach

1. **Define selection criteria** (stratified sampling):
   - Sample by ecosystem: Node.js, Python, Go, Rust, Java (10 repos each = 50 base)
   - Stratify by stars: 10k+, 1k-10k, <1k (capture both popular and typical)
   - Cap per organization (max 2 repos per org to avoid bias)
   - Handle monorepos: count each `.devcontainer/*` config separately
2. **Document JSONC parsing approach**:
   - Use `hjson` Python library or strip comments before jq
   - Record parsing failures separately
3. Track frequency of each property across repos
4. Identify common patterns:
   - Most used features (docker-in-docker, node, python, etc.)
   - Common runArgs patterns
   - Lifecycle command usage (`initializeCommand` prevalence!)
5. Estimate what % would work if we:
   - Block initializeCommand
   - Block privileged mode
   - Restrict mounts to workspace only

## Output Format

- Raw counts + methodology (reproducible)
- Property frequency table with percentages
- Feature usage statistics
- "Safe subset" compatibility percentage (simple proportion with sample size for context)
- Notable outliers/patterns

## Key context

Look at repos from diverse ecosystems:
- Node.js/TypeScript projects
- Python projects
- Go projects
- Rust projects
- Multi-language monorepos

## Acceptance
- [ ] Selection criteria documented (stratification, caps, dedup)
- [ ] JSONC parsing methodology documented
- [ ] At least 50 devcontainer.json files analyzed
- [ ] Property frequency table produced with percentages
- [ ] Feature usage statistics gathered
- [ ] initializeCommand prevalence specifically noted
- [ ] Estimate of "safe subset" compatibility with methodology
- [ ] Common patterns documented with examples

## Done summary
TBD

## Evidence
- Commits:
- Tests:
- PRs:

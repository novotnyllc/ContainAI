# fn-13-1c7.5 Evaluate alternative approaches (DevPod, Envbuilder)

## Description
Evaluate alternative approaches to devcontainer support: DevPod-style provider abstraction, Envbuilder-style daemonless builds, and any other creative options discovered during research.

**Size:** M
**Files:** Output to `.flow/research/fn-13-1c7/option-alternatives.md`

## Approach

1. **DevPod analysis** (loft-sh/devpod):
   - How does their provider abstraction work?
   - Could ContainAI be a "provider" for DevPod?
   - Security properties they enforce
   - Integration complexity

2. **Envbuilder analysis** (coder/envbuilder):
   - How does daemonless building work (Kaniko)?
   - Could this eliminate Docker socket exposure?
   - Compatibility with Sysbox
   - Build time implications

3. **Other options**:
   - Running @devcontainers/cli inside the container (not on host)
   - Pre-built image registry (skip build, use curated images)
   - Minimal devcontainer subset (only image + workspaceFolder)

4. Document each with effort estimate and security tradeoffs

## Key context

Reference implementations found:
- coder/coder: Go interface wrapping devcontainer CLI
- loft-sh/devpod: Full parsing with security properties
- coder/envbuilder: Kaniko-based daemonless builds
- STRML/claude-cells: Security tier system for AI sandboxing
## Acceptance
- [x] DevPod architecture analyzed
- [x] Envbuilder architecture analyzed
- [x] At least one creative alternative explored
- [x] Each option has effort estimate (S/M/L)
- [x] Security tradeoffs documented for each
- [x] Clear ranking of options
## Done summary
Comprehensive evaluation of alternative devcontainer approaches completed.

**Options Evaluated:**

1. **DevPod Provider (Option C):** Analyzed client-agent architecture where providers are CLI programs defined via provider.yaml. Security properties include tunnel-based credential isolation but NOT devcontainer property filtering. Verdict: NOT RECOMMENDED as primary - inverts control flow, ContainAI becomes subordinate. Effort: L (4-8 weeks).

2. **Envbuilder/Kaniko (Option D):** Analyzed daemonless builds using Kaniko in userspace. Would eliminate Docker socket exposure but has fundamental architecture mismatch - Envbuilder transforms container in-place rather than launching nested containers. Limited spec support (no mounts, ports). Verdict: NOT RECOMMENDED - architecture incompatible with system container model. Effort: XL (8-16 weeks).

3. **Creative Alternatives (Option E):**
   - E1: CLI inside Sysbox - Already analyzed in Option A
   - E2: Pre-built image registry - Useful supplement, not primary. Effort: M (ongoing)
   - E3: Minimal devcontainer subset - Good for "strict mode". Effort: S (1-2 weeks)
   - E4: Claude-Cells security tiers - RECOMMENDED implementation pattern. Effort: M (2-3 weeks)

**Recommendation:** Primary path should remain Options A (CLI wrapping) + B (direct parsing) from prior tasks, enhanced with E4 security tiers for user control. Alternatives evaluated here are NOT recommended as primary approaches.

**Output:** `.flow/research/fn-13-1c7/option-alternatives.md`
## Evidence
- Commits:
- Tests:
- PRs:

# ContainAI drop-in for ssh.service
# Adds container awareness and init service dependency

[Unit]
# Only start in container environments
ConditionVirtualization=container
# Wait for initialization to complete - Requires= makes SSH fail if init fails
# This ensures startup hook failures prevent the container from being usable
Requires=containai-init.service
After=containai-init.service

[Service]
# Ensure BASH_ENV is available for non-interactive SSH commands across users
Environment=BASH_ENV=/etc/containai/bash_env
